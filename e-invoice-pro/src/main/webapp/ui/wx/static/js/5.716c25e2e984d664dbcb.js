webpackJsonp([5],{S4GS:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("lbHh"),n=e.n(s),i=e("Ucwc"),o=e.n(i),l={data:function(){return{email:"",paramsdata:{},showSendPdf:!1,usePhone:1,useEmail:1,tot:0}},created:function(){this.usePhone=parseInt(n.a.get("usePhone")),this.useEmail=parseInt(n.a.get("useEmail")),this.getInvque()},methods:{download:function(){window.open(this.paramsdata.iqpdf)},getInvque:function(){var t=this;this.$http.getInvque({iqseqno:this.$route.query.iqseqno}).then(function(a){if(0==a.code&&a.data&&a.data.length>0)return t.paramsdata=a.data[0],t.tot=o.a.plus(t.paramsdata.iqtotje,t.paramsdata.iqtotse),void(t.email=t.paramsdata.iqemail);t.$toast.fail("查询详情失败"),t.$router.go(-1)})},beforeSendPdf:function(t,a){if("confirm"===t){""==this.email&&this.$dialog.alert({message:"邮箱必须填写",confirmButtonText:"知道了"});if(""!=this.email&&!/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\-|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{1,3}$/.test(this.email))return void this.$dialog.alert({message:"邮箱格式不正确"+this.email,confirmButtonText:"知道了"});this.sendPdf(a)}else a()},sendPdf:function(t){var a=this;this.$http.sendPdf({iqseqno:this.$route.query.iqseqno,email:this.email}).then(function(e){t(),0!=e.code?a.$dialog.alert({message:e.message,confirmButtonText:"错误"}):a.$dialog.alert({message:"邮件发送中，请稍后到邮箱查收",confirmButtonText:"成功"})})},toInvoiceList:function(){this.$router.push("invoice-list")}}},r={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("article",[e("van-nav-bar",{attrs:{fixed:"",title:"发票详情"}},[e("van-icon",{attrs:{slot:"left",name:"arrow-left"},on:{click:function(a){t.$router.go(-1)}},slot:"left"}),t._v(" "),e("van-icon",{attrs:{slot:"right",name:"wap-nav"},on:{click:t.toInvoiceList},slot:"right"})],1),t._v(" "),e("van-cell-group",[e("van-cell",{attrs:{title:"发票类型："}},[e("p",[t._v("电子发票")])]),t._v(" "),e("van-cell",{attrs:{title:"购买方名称："}},[e("p",[t._v(t._s(t.paramsdata.iqgmfname))])]),t._v(" "),t.paramsdata.iqgmftax?[e("van-cell",{attrs:{title:"纳税人识别号："}},[e("p",[t._v(t._s(t.paramsdata.iqgmftax))])]),t._v(" "),e("van-cell",{attrs:{title:"银行账户："}},[e("p",[t._v(t._s(t.paramsdata.iqgmfbank))])]),t._v(" "),e("van-cell",{attrs:{title:"地址电话："}},[e("p",[t._v(t._s(t.paramsdata.iqgmfadd))])])]:t._e(),t._v(" "),e("van-cell",{attrs:{title:"发票金额："}},[e("p",[t._v(t._s(t.paramsdata.iqtotje))])]),t._v(" "),e("van-cell",{attrs:{title:"发票税额："}},[e("p",[t._v(t._s(t.paramsdata.iqtotse))])]),t._v(" "),e("van-cell",{attrs:{title:"发票总额："}},[e("p",[t._v(t._s(t.tot))])]),t._v(" "),e("van-cell",{attrs:{title:"申请时间："}},[void 0!=t.paramsdata.rtkprq?e("p",[t._v(t._s(t._f("formatDate")(t.paramsdata.rtkprq)))]):t._e()]),t._v(" "),t.useEmail&&t.paramsdata.iqemail?e("van-cell",{attrs:{title:"邮箱地址："}},[e("p",[t._v(t._s(t.paramsdata.iqemail))])]):t._e(),t._v(" "),t.usePhone&&t.paramsdata.iqtel?e("van-cell",{attrs:{title:"电话号码："}},[e("p",[t._v(t._s(t.paramsdata.iqtel))])]):t._e()],2),t._v(" "),e("van-row",{staticStyle:{"margin-top":"30px"}},[e("van-col",{attrs:{span:"12"}},[e("van-button",{staticStyle:{"background-color":"#ffffff",color:"#000000"},attrs:{"bottom-action":""},on:{click:function(a){t.showSendPdf=!0}}},[t._v("重发至邮箱")])],1),t._v(" "),e("van-col",{attrs:{span:"12"}},[e("van-button",{staticStyle:{"background-color":"#0066CC"},attrs:{type:"primary","bottom-action":""},on:{click:t.download}},[t._v("下载电子发票")])],1)],1),t._v(" "),e("van-dialog",{attrs:{"show-cancel-button":"","before-close":t.beforeSendPdf},model:{value:t.showSendPdf,callback:function(a){t.showSendPdf=a},expression:"showSendPdf"}},[e("div",{staticClass:"info"},[t._v("请确认下列邮箱，如有变更请修改")]),t._v(" "),e("van-field",{attrs:{label:"邮箱",placeholder:"请输入邮箱",required:""},model:{value:t.email,callback:function(a){t.email=a},expression:"email"}})],1)],1)},staticRenderFns:[]};var c=e("VU/8")(l,r,!1,function(t){e("nCsS")},"data-v-704112c7",null);a.default=c.exports},nCsS:function(t,a){}});