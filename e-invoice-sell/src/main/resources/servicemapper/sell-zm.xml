<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace 一定要对应包的dao -->
<mapper namespace="com.einvoice.sell.dao.ZMDao">

	<select id="test" resultType="NewHashMap">
		select * from test where 1=2
	</select>
	
	<select id="getList" resultType="NewHashMap" parameterType="NewHashMap">
		SELECT a.sheetid FROM invoice_sheet_head a where a.flag=0 and a.shopid=#{shopid} and rownum &lt; 1000
	</select>
	
	<select id="getHead" resultType="NewHashMap" parameterType="NewHashMap">
		select * from invoice_sheet_head where sheetid=#{sheetid}
	</select>
	
	<select id="getDetail" resultType="NewHashMap" parameterType="NewHashMap">
		select * from invoice_sheet_detail where sheetid=#{sheetid}
	</select>
	
	<update id="callbackSheet" parameterType="NewHashMap">
		update invoice_sheet_head
		   set 
		   	   <if test="flagmsg!=null">
		   	   flagmsg=#{flagmsg},
		   	   </if>
		   	   <if test="invoiceCode!=null">
		       invoiceCode=#{invoiceCode},
		       </if>
		       <if test="invoiceno!=null">
		       invoiceNo=#{invoiceNo},
		       </if>
		       <if test="invoiceDate!=null">
		       invoiceDate=#{invoiceDate},
		       </if>
		       <if test="pdfurl!=null">
		       pdfurl=#{pdfurl},
		       </if>
		       <if test="hzinvoicecode !=null">
		       hzinvoiceCode=#{hzinvoicecode},
		       </if>
		       <if test="hzinvoiceno !=null">
		       hzinvoiceNo=#{hzinvoiceno},
		       </if>
		       <if test="hzpdfurl !=null">
		       hzpdfurl=#{hzpdfurl},
		       </if>
		       <if test="hzinvoicedate !=null">
		       hzinvoiceDate=#{hzinvoicedate},
		       </if>
		       <if test="recvemail !=null">
		       recvemail=#{recvemail},
		       </if>
		       <if test="recvphone !=null">
		       recvphone=#{recvphone},
		       </if>
		       flag=#{flag}
		 where sheetid=#{sheetid}
	</update>

</mapper>
